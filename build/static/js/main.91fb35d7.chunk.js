(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(16),r=n.n(s),i=(n(23),n(3)),o=n.n(i),l=n(5),j=n(4),d=n(6),u=n.n(d),b=n(0),h=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"d-flex justify-content-center mt-5",children:Object(b.jsx)("div",{className:"spinner-border",role:"status",children:Object(b.jsx)("span",{className:"sr-only"})})})})},O=function(e){e.interno;var t=e.distance;return console.log(t.data),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"card mt-5",children:[Object(b.jsxs)("p",{children:["Ubicacion actual: ",Object(b.jsx)("span",{className:"h6",children:t.data.address})]}),Object(b.jsxs)("p",{children:["Ditancia hasta aqui: ",Object(b.jsx)("span",{className:"h6",children:t.data.distancia})]}),Object(b.jsxs)("p",{children:["Tiempo hasta aqui: ",Object(b.jsx)("span",{className:"h6",children:t.data.tiempo})]})]})})},p=function(e){var t=e.servicio,n=(t.id,t.nombre),a=t.hcitacion,s=(t.hsalida,t.hllegada,t.origen),r=t.interno,i=e.position.lat,d=e.position.lon,p=Object(c.useState)(null),x=Object(j.a)(p,2),m=(x[0],x[1],Object(c.useState)(!1)),v=Object(j.a)(m,2),f=v[0],g=v[1],N=Object(c.useState)(null),w=Object(j.a)(N,2),S=w[0],y=w[1];Object(c.useEffect)((function(){k()}),[e]);var k=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,u()("http://dev-masterbus.tech:8000/api/consultas/position/"+r);case 3:if(t=e.sent,n=t.data,(c=n.ApiGetLocationByVehicleResult).RespuestaOk){e.next=8;break}return e.abrupt("return");case 8:a=c.Resultado,F(a.Latitud,a.Longitud);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(o.a.mark((function e(t,n){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("calculando ",t,"   ",n),e.next=3,u.a.post("http://localhost:8000/api/consultas/distance",{latinterno:i,longinterno:d,latuser:t,longuserm:n});case 3:c=e.sent,y(c),g(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("h5",{className:"card-header",children:n}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("p",{children:["Salio de: ",Object(b.jsx)("span",{className:"h5",children:s})," a las: ",Object(b.jsx)("span",{className:"h5",children:a})]}),Object(b.jsxs)("p",{children:["Interno: ",Object(b.jsxs)("span",{className:"h5",children:[r," "]})]})]})]}),f?Object(b.jsx)(h,{}):S?Object(b.jsx)(O,{interno:r,distance:S}):""]})};var x=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(j.a)(s,2),i=r[0],d=r[1],h=Object(c.useState)({}),O=Object(j.a)(h,2),x=O[0],m=O[1],v=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()("http://dev-masterbus.tech:8000/api/consultas/ordenesnow/10");case 2:t=e.sent,n=t.data,a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){v(),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;m({lat:t.latitude,lon:t.longitude})}),(function(){}))}),[]),console.log(n),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"row mt-5",children:Object(b.jsx)("div",{className:"col-lg-6 col-sm-12",children:Object(b.jsxs)("select",{className:"form-control form-select",onChange:function(e){var t=e.target,c=n.find((function(e){return e.id==t.value}));d(c)},children:[Object(b.jsx)("option",{value:"0",children:"Seleccione un servicio"},"0"),n.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.nombre.toUpperCase()},e.id)}))]})})}),Object(b.jsx)("div",{className:"row mt-5",children:Object(b.jsx)("div",{className:"col-lg-6 col-sm-12",children:i?Object(b.jsx)(p,{servicio:i,position:x}):Object(b.jsx)("h5",{children:"Seleccione un servicio"})})})]})},m=n(18);var v=function(){return Object(b.jsxs)(m.a,{children:[Object(b.jsxs)("nav",{class:"navbar navbar-light bg-light",children:[Object(b.jsx)("a",{class:"navbar-brand",href:"#",children:Object(b.jsx)("img",{src:"./masterbus-log.png",alt:""})}),Object(b.jsx)("label",{children:"Sistema de arribo predictivo"})]}),Object(b.jsx)(x,{})]})};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(v,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.91fb35d7.chunk.js.map